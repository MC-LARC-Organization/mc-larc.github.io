import{a as f,t as p}from"../chunks/disclose-version.tVpYrPme.js";import{i as Z}from"../chunks/legacy.DlkocQ35.js";import{p as ee,l as L,d as te,f as se,t as x,a as ae,g as r,b as v,s as l,c,r as i,m,e as B,h as re}from"../chunks/runtime.BcJFkwAi.js";import{e as j,s as k}from"../chunks/store.dEBlKHcu.js";import{i as w,b as ne}from"../chunks/this.CATQH9o7.js";import{e as oe,I as E,C as ie,b as le,i as ce,V as N,a as de,s as G}from"../chunks/versions.BPwrn8td.js";import{p as ve,o as fe}from"../chunks/index-client.BcnZZLae.js";import{g as H}from"../chunks/entry.CnCcT-yk.js";import{N as pe}from"../chunks/Navbar.ClAJKaxU.js";import{M as me}from"../chunks/MultipleChoices.Dhf-Q4sk.js";const ue=({params:g})=>({taskId:g.taskId,version:g.version}),De=Object.freeze(Object.defineProperty({__proto__:null,load:ue},Symbol.toStringTag,{value:"Module"}));var _e=p('<button class="lexend flex items-center gap-2 rounded-lg bg-neutral-800 py-2 pl-2 pr-4 text-sm text-white"><!> <div class="flex flex-col items-center"><p class="text-sm">Prev</p> <p class="text-xs text-neutral-400"> </p></div></button>'),xe=p("<div></div>"),ge=p('<button class="lexend flex items-center gap-2 rounded-lg bg-neutral-800 py-2 pl-4 pr-2 text-sm text-white"><div class="flex flex-col items-center"><p class="text-sm">Next</p> <p class="text-xs text-neutral-400"> </p></div> <!></button>'),he=p("<div></div>"),be=p("<button> </button>"),ke=p('<div class="mt-4 w-full rounded-lg bg-neutral-800 px-4 py-4"><h3 class="lexend text-base font-bold text-white">Task Description</h3> <p class="lexend mt-1 text-sm font-light text-white"> </p></div>'),we=p('<!> <section class="flex flex-col items-center justify-center px-4 py-4"><div class="mb-4 flex w-full justify-between"><!> <!></div> <div class="flex w-full items-stretch overflow-hidden rounded-lg bg-neutral-800"></div> <!> <img class="mb-8 mt-4 w-full max-w-[400px] rounded-lg"> <!></section>',1);function Pe(g,M){ee(M,!1);let o=ve(M,"data",8),I=m(""),y=m([]),O=m(0),$=!1,u=m(null),_=m(null);async function J(){const a=(await(await fetch("/assets/choices/refined_larc.csv")).text()).split(`
`).map(n=>{const d=n.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g);return d?d.map(b=>b.replace(/^"|"$/g,"")):[]}).find(n=>n[1]===o().taskId);a&&v(I,a[2])}async function D(){if(!$)return;const t={original:"original_mc_larc.csv",constraint:"constraints_mc_larc.csv","self-feedback":"self-feedback_mc_larc.csv"}[o().version]||"original_mc_larc.csv",n=(await(await fetch(`/assets/choices/${t}`)).text()).split(`
`).map(d=>{const b=d.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g);return b?b.map(Y=>Y.replace(/^"|"$/g,"")):[]}).find(d=>d[1]===o().taskId);n&&(v(y,[n[2],n[3],n[4],n[5],n[6]]),v(O,parseInt(n[7])))}async function P(){if(!$)return;const s=[...await(await fetch("/assets/choices/output.json")).json()].sort(),a=s.indexOf(o().taskId);a>0?v(u,s[a-1]):v(u,null),a<s.length-1?v(_,s[a+1]):v(_,null)}fe(async()=>{$=!0,await Promise.all([J(),D(),P()])});const K=[N.Original,N.Constraint,N.SelfFeedback];function Q(t){H(`/task/${t}/${o().taskId}`)}let h=m();function S(t){t&&H(`/task/${o().version}/${t}`)}L(()=>B(o()),()=>{o().taskId&&P()}),L(()=>(B(o()),r(h)),()=>{var t;o().version&&(D(),(t=r(h))==null||t.reset())}),te(),Z();var V=we(),F=se(V),U=re(()=>`/task/${o().version}`);pe(F,{get title(){return o().taskId},get link(){return r(U)}});var q=l(F,2),R=c(q),z=c(R);w(z,()=>r(u),t=>{var e=_e(),s=c(e);E(s,{src:ie,class:"h-5 w-5",micro:!0});var a=l(s,2),n=l(c(a),2),d=c(n,!0);i(n),i(a),i(e),x(()=>k(d,r(u))),j("click",e,()=>S(r(u))),f(t,e)},t=>{var e=xe();f(t,e)});var W=l(z,2);w(W,()=>r(_),t=>{var e=ge(),s=c(e),a=l(c(s),2),n=c(a,!0);i(a),i(s);var d=l(s,2);E(d,{src:le,class:"h-5 w-5",micro:!0}),i(e),x(()=>k(n,r(_))),j("click",e,()=>S(r(_))),f(t,e)},t=>{var e=he();f(t,e)}),i(R);var T=l(R,2);oe(T,5,()=>K,ce,(t,e)=>{var s=be(),a=c(s,!0);i(s),x(()=>{de(s,`lexend w-full px-4 py-2 text-sm ${(o().version===r(e).name?"bg-white text-black":"bg-neutral-800 text-gray-500")??""}`),k(a,r(e).name)}),j("click",s,()=>Q(r(e).name)),f(t,s)}),i(T);var A=l(T,2);w(A,()=>r(I),t=>{var e=ke(),s=l(c(e),2),a=c(s,!0);i(s),i(e),x(()=>k(a,r(I))),f(t,e)});var C=l(A,2),X=l(C,2);w(X,()=>r(y).length>0,t=>{ne(me(t,{get choices(){return r(y)},get answer(){return r(O)},$$legacy:!0}),e=>v(h,e),()=>r(h))}),i(q),x(()=>{G(C,"src",`/assets/tasks/${o().taskId}.png`),G(C,"alt",o().taskId)}),f(g,V),ae()}export{Pe as component,De as universal};
