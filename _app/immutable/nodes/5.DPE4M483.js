import{a as p,t as v}from"../chunks/disclose-version.RMkl_-ui.js";import{i as Z}from"../chunks/legacy.CgMNwOP2.js";import{u as ee,E as B,F as te,z as se,t as x,x as ae,C as r,s as l,c,B as f,r as i,D as m,G as E,I as re}from"../chunks/runtime.CBu_r9p9.js";import{s as k}from"../chunks/render.yGww_O-B.js";import{i as w,b as ne}from"../chunks/this.BZAQLy_4.js";import{e as oe,I as G,C as ie,a as le,i as ce,s as L}from"../chunks/Icon.CR9FrAyB.js";import{V as j,s as de}from"../chunks/versions.DRDs0g-4.js";import{e as N}from"../chunks/store.CqJFsyPF.js";import{p as fe}from"../chunks/props.-FiUUMrw.js";import{o as pe}from"../chunks/index-client.5ZHUkz05.js";import{g as H}from"../chunks/entry.BAqwlJP3.js";import{N as ve}from"../chunks/Navbar.CJ-RjePs.js";import{M as me}from"../chunks/MultipleChoices.yX4EO4J_.js";const ue=({params:g})=>({taskId:g.taskId,version:g.version}),Se=Object.freeze(Object.defineProperty({__proto__:null,load:ue},Symbol.toStringTag,{value:"Module"}));var _e=v('<button class="lexend flex items-center gap-2 rounded-lg bg-neutral-800 py-2 pl-2 pr-4 text-sm text-white"><!> <div class="flex flex-col items-center"><p class="text-sm">Prev</p> <p class="text-xs text-neutral-400"> </p></div></button>'),xe=v("<div></div>"),ge=v('<button class="lexend flex items-center gap-2 rounded-lg bg-neutral-800 py-2 pl-4 pr-2 text-sm text-white"><div class="flex flex-col items-center"><p class="text-sm">Next</p> <p class="text-xs text-neutral-400"> </p></div> <!></button>'),he=v("<div></div>"),be=v("<button> </button>"),ke=v('<div class="mt-4 w-full rounded-lg bg-neutral-800 px-4 py-4"><h3 class="lexend text-base font-bold text-white">Task Description</h3> <p class="lexend mt-1 text-sm font-light text-white"> </p></div>'),we=v('<!> <section class="flex flex-col items-center justify-center px-4 py-4"><div class="mb-4 flex w-full justify-between"><!> <!></div> <div class="flex w-full items-stretch overflow-hidden rounded-lg bg-neutral-800"></div> <!> <img class="img-max mb-8 mt-4 w-full rounded-lg"> <!></section>',1);function Ve(g,D){ee(D,!1);let o=fe(D,"data",8),I=m(""),y=m([]),M=m(0),$=!1,u=m(null),_=m(null);async function J(){const a=(await(await fetch("/assets/choices/refined_larc.csv")).text()).split(`
`).map(n=>{const d=n.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g);return d?d.map(b=>b.replace(/^"|"$/g,"")):[]}).find(n=>n[1]===o().taskId);a&&f(I,a[2])}async function O(){if(!$)return;const t={original:"original_mc_larc.csv",constraint:"constraints_mc_larc.csv","self-feedback":"self-feedback_mc_larc.csv"}[o().version]||"original_mc_larc.csv",n=(await(await fetch(`/assets/choices/${t}`)).text()).split(`
`).map(d=>{const b=d.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g);return b?b.map(Y=>Y.replace(/^"|"$/g,"")):[]}).find(d=>d[1]===o().taskId);n&&(f(y,[n[2],n[3],n[4],n[5],n[6]]),f(M,parseInt(n[7])))}async function F(){if(!$)return;const s=[...await(await fetch("/assets/choices/output.json")).json()].sort(),a=s.indexOf(o().taskId);a>0?f(u,s[a-1]):f(u,null),a<s.length-1?f(_,s[a+1]):f(_,null)}pe(async()=>{$=!0,await Promise.all([J(),O(),F()])});const K=[j.Original,j.Constraint,j.SelfFeedback];function Q(t){H(`/task/${t}/${o().taskId}`)}let h=m();function P(t){t&&H(`/task/${o().version}/${t}`)}B(()=>E(o()),()=>{o().taskId&&F()}),B(()=>(E(o()),r(h)),()=>{var t;o().version&&(O(),(t=r(h))==null||t.reset())}),te(),Z();var S=we(),V=se(S),U=re(()=>`/task/${o().version}`);ve(V,{get title(){return o().taskId},get link(){return r(U)}});var z=l(V,2),C=c(z),q=c(C);w(q,()=>r(u),t=>{var e=_e(),s=c(e);G(s,{src:ie,class:"h-5 w-5",micro:!0});var a=l(s,2),n=l(c(a),2),d=c(n,!0);i(n),i(a),i(e),x(()=>k(d,r(u))),N("click",e,()=>P(r(u))),p(t,e)},t=>{var e=xe();p(t,e)});var W=l(q,2);w(W,()=>r(_),t=>{var e=ge(),s=c(e),a=l(c(s),2),n=c(a,!0);i(a),i(s);var d=l(s,2);G(d,{src:le,class:"h-5 w-5",micro:!0}),i(e),x(()=>k(n,r(_))),N("click",e,()=>P(r(_))),p(t,e)},t=>{var e=he();p(t,e)}),i(C);var R=l(C,2);oe(R,5,()=>K,ce,(t,e)=>{var s=be(),a=c(s,!0);i(s),x(()=>{de(s,`lexend w-full px-4 py-2 text-sm ${(o().version===r(e).name?"bg-white text-black":"bg-neutral-800 text-gray-500")??""}`),k(a,r(e).name)}),N("click",s,()=>Q(r(e).name)),p(t,s)}),i(R);var A=l(R,2);w(A,()=>r(I),t=>{var e=ke(),s=l(c(e),2),a=c(s,!0);i(s),i(e),x(()=>k(a,r(I))),p(t,e)});var T=l(A,2),X=l(T,2);w(X,()=>r(y).length>0,t=>{ne(me(t,{get choices(){return r(y)},get answer(){return r(M)},$$legacy:!0}),e=>f(h,e),()=>r(h))}),i(z),x(()=>{L(T,"src",`/assets/tasks/${o().taskId}.png`),L(T,"alt",o().taskId)}),p(g,S),ae()}export{Ve as component,Se as universal};
